<!DOCTYPE html>
<html>
<head>
	<title>Leaflet Layers Control Example</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">


	<!-- Stylesheets
    ================================================== -->
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/cover.css">
	<!--<link rel="stylesheet" href="css/leaflet_mapbbcode.css">-->
    <!--<link rel="stylesheet" href="css/style.css">-->
   	<link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.ie.css" />
    <![endif]-->
    <link rel="stylesheet" href="css/overrides.css">
    
  
    
    
    
    <!-- Scripts
    ================================================== -->
    <!--<script src="js/leaflet.js"></script>-->
    <script src="js/rivers_TEMP.js" type="text/javascript"></script>
    <script src="js/bioregions_TEMP.js" type="text/javascript"></script>
    <script src="js/layerlist.js"></script>
    <script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>
    
    
    

    


</head>





<body>


	
    <!-- ================================================== -->
	<!-- Begin full page map -->
	<!-- ================================================== -->
	<div id="map">
    
  


    <!-- ================================================== -->
	<!-- Top navigation -->
	<!-- ================================================== -->    
    
  	<nav class="navbar navbar-default" role="navigation">
  		<div class="container-fluid">
    	
        <!-- Brand and toggle get grouped for better mobile display -->
   	 		<div class="navbar-header">
      			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        		<span class="sr-only">Toggle navigation</span>
        		<span class="icon-bar"></span>
        		<span class="icon-bar"></span>
        		<span class="icon-bar"></span>
      			</button>
      		<a class="navbar-brand" href="#">Brand Here</a>
    		</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
    		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      			<ul class="nav navbar-nav">
        			<li class="active"><a href="#">Link</a></li>
        			<li><a href="#">Link</a></li>
        			<li class="dropdown">
          			<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
        				<ul class="dropdown-menu">
            				<li><a href="#">Action</a></li>
            				<li><a href="#">Another action</a></li>
            				<li><a href="#">Something else here</a></li>
            				<li class="divider"></li>
            				<li><a href="#">Separated link</a></li>
            				<li class="divider"></li>
            				<li><a href="#">One more separated link</a></li>
          				</ul>
    				</li>
    			</ul>
      
      			<form class="navbar-form navbar-left" role="search">
        		<div class="form-group">
          			<input type="text" class="form-control" placeholder="Search">
        		</div>
       			<button type="submit" class="btn btn-default">Submit</button>
      			</form>
      
      			<ul class="nav navbar-nav navbar-right">
        			<li><a href="#">Link</a></li>
        			<li class="dropdown">
          				<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
          				<ul class="dropdown-menu">
            				<li><a href="#">Action</a></li>
            				<li><a href="#">Another action</a></li>
            				<li><a href="#">Something else here</a></li>
            				<li class="divider"></li>
            				<li><a href="#">Separated link</a></li>
          				</ul>
        			</li>
      			</ul>
    		</div><!-- /.navbar-collapse -->
  		</div><!-- /.container-fluid -->
	</nav><!-- /.navbar -->



    <!-- ================================================== -->
	<!-- Pulldown with tile options -->
	<!-- ================================================== --> 
		
	<div class="well" id="tile-select">
		<select size="1" id="llselect">
		<input type="button" id="lladd" value="Show layer">            
   	</div><!-- /.well -->
        



    <!-- ================================================== -->
	<!-- Different selection options -->
	<!-- ================================================== -->         
    <div class="well">
        <div class="btn-group btn-group-sm" id="btn-select">
            <button type="button" class="btn btn-default" id="bioregion">Bioregions</button>
            <button type="button" class="btn btn-default" id="rivers">Rivers</button>
        </div>
    </div><!-- /.well -->
    
    
    <div class="panel panel-primary">
        <div class="panel-heading">Category 1</div>
        <div class="panel-body">
            <div class="form-group">
                <label for="select">Sub-Heading?</label>
                <select multiple class="form-control" id="selectpicker" >
                    <option val="bioregion">Bioregions</option>
                    <option val="river">Rivers</option>
                    <option>Etc</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <button type="button" class="btn btn-primary btn-sm">Submit</button>

        </div><!-- /.panel-body -->
    </div><!-- /.panel -->
        


	<div class="panel panel-success">
  		<div class="panel-heading">Category 2</div>
  		<div class="panel-body">
            <form class="form-horizontal">
  				<fieldset>
                    <div class="form-group" id="category2">
      					<label class="col-sm-2 control-label">Radios</label>
      					<div class="col-sm-10">
        					<div class="radio">
          					<label>
          						<input type="radio" name="optionsRadios" id="bioregion" checked="">
            					Bioregions
          					</label>
        					</div>
        					<div class="radio">
          					<label>
            					<input type="radio" name="optionsRadios" id="rivers">
            					Rivers
          					</label>
        					</div>
                            <div class="radio">
          					<label>
            					<input type="radio" name="optionsRadios" id="cartoLyr">
            					CartoDB layer
          					</label>
        					</div>
      					</div>
                      	<!--<button type="submit" class="btn btn-default btn-xs" id="submit">Submit</button>-->
    				</div>
    	<div class="form-group">
      		<label for="select" class="col-sm-2 control-label">Selects</label>
      		<div class="col-sm-10">
        		<select class="form-control" id="select">
          			<option>1</option>
          			<option>2</option>
          			<option>3</option>
          			<option>4</option>
          			<option>5</option>
        		</select>
        	</div>
    	</div>
    
    
    	<div class="form-group">
      		<div class="col-lg-10 col-lg-offset-2">
      			<div class="btn-group btn-group-xs">
        			<button class="btn btn-default">Cancel</button>
        			<button type="submit" class="btn btn-primary" id="submit2">Submit</button>
        		</div>
      		</div>
    	</div>
  		</fieldset>
		</form>

  		</div><!-- /.panel-body -->
		</div><!-- /.panel -->




	<div class="panel panel-info">
    	<div class="panel-heading">Category 3</div>
  			<div class="panel-body">
            	<form role="form">
  					<div class="form-group">
    					<label for="exampleInputFile">here's another heading</label>
    					<div class="checkbox">
    						<label>
      						<input type="checkbox">Check me out
    						</label>
 						</div>
  						<button type="submit" class="btn btn-default btn-xs">Submit</button>
				</form>
            
       	</div><!-- /.panel-body -->
   	</div><!-- /.panel -->
    
    
    </div><!-- /#map -->

	





	<script>
	
	<!-- ================================================== -->
	<!-- Create the map and additional components -->
	<!-- ================================================== -->

	//var map = createMap('map');
	
	//var map;
	var latlong = [52, -115];
	var zoom = 3;
	//var legend;
	var info;
	var scale;
	
	
	// create leaflet map
	var map = L.map('map', {zoomControl: false, center: latlong, zoom: zoom});

	
	



	<!-- ================================================== -->
	<!-- Add Layers -->
	<!-- ================================================== -->
	
	<!-- base layer -->
	map.addLayer(window.layerList.getLeafletLayer('OpenStreetMap'));
	
		
		
		
	<!-- Geojson rivers data -->
	rivers = L.geoJson(rivers, {
		style: riverStyle,
		filter: function (feature, layer) {
			if (feature.properties) {
				// If the property "underConstruction" exists and is true, return false (don't render features under construction)
				return feature.properties.underConstruction !== undefined ? !feature.properties.underConstruction : true;
			}
			return false;
			}
			//onEachFeature: onEachFeature
		}).addTo(map);
		
		
		
		
	<!-- CartoDB temporary NYS county layer -->
	var cartoURL = 'http://spatial.cartodb.com/api/v2/viz/3abc1b26-d77e-11e3-b500-0e10bcd91c2b/viz.json'		
	var cartoLyr;

  	cartodb.createLayer(map, cartoURL, {
		query: 'SELECT * from {{table_name}}',
		infowindow: false
	})
    	.on('done', function(layer) {
			cartoLyr = layer;
			map.addLayer(cartoLyr);
	});
		
		
		
		
	<!-- Geojson bioregions data -->
	bioregion = L.geoJson(bioData, {
		style: bioregionStyle,
		filter: function (feature, layer) {
			if (feature.properties) {
				// If the property "underConstruction" exists and is true, return false (don't render features under construction)
				return feature.properties.underConstruction !== undefined ? !feature.properties.underConstruction : true;
			}
			return false;
			},
			onEachFeature: onEachFeature
		}).addTo(map);
       
	

		
		
		
		
	<!-- ================================================== -->
	<!-- Do stuff -->
	<!-- ================================================== -->
		

	<!-- For viewing different osm tiles -->
	var sel = document.getElementById('llselect');
	var layerKeys = window.layerList.getSortedKeys();

	for( var i = 0; i < layerKeys.length; i++ ) {
    	if( !window.layerList.requiresKey(layerKeys[i]) ) {
        	var opt = document.createElement('option');
        	opt.innerHTML = opt.value = layerKeys[i];
        	sel.appendChild(opt);
    	}
	}
	
	
	
	<!-- Add the inital layers and switch tiles if selected -->
	L.DomEvent.on(document.getElementById('lladd'), 'click', function() {
		map.eachLayer(function(layer) {
			map.removeLayer(layer);
			map.removeLayer(bioregion);
			map.removeLayer(rivers);
			map.removeLayer(cartoLyr);
		});
    		map.addLayer(window.layerList.getLeafletLayer(sel.value));
			map.addLayer(bioregion);
			map.addLayer(rivers);
			map.addLayer(cartoLyr);
		});
		
	



	<!-- ================================================== -->
	<!-- Infowindow control -->
	<!-- ================================================== -->
	
	var info = L.control();
	
	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
		this.update();
		return this._div;
	};
	
	// method that we will use to update the control based on feature properties passed
	info.update = function (props) {
    this._div.innerHTML = '<h4>Infowindow Title</h4>' +  (props ?
        '<b>' + props.Name + '</b>'
        : 'Hover over blah');
	};

	
	info.addTo(map);
		
	
	
	
	
	<!-- ================================================== -->
	<!-- Legend control -->
	<!-- ================================================== -->
	
	legend = L.control({position: 'bottomright'});

	legend.onAdd = function (map) {
		var div = L.DomUtil.create('div', 'legend');
		div.innerHTML += '<h4>Legend Title</h4>';
	return div;
	};
	
	//legend.addTo(map);




	<!-- ================================================== -->
	<!-- Temporary -->
	<!-- ================================================== -->
	
	
	
	map.on('click', function(e) {
    	//alert(e.latlng);
	});



		
//	$('#btn-select .btn').click(function(){
//		
//		//var myID = $(this).attr('id');
//	
//		//alert (myID)
//		
//		//var layer = e.target(myID);
//		
//		map.removeLayer(window[$(this).attr('id')]);	
//		
//	});
	
	
	
	
	$('input[name="optionsRadios"]').change(function () {
    // Remove unchecked layers
    $('input:radio[name="optionsRadios"]:not(:checked)').each(function () {
        map.removeLayer(window[$(this).attr('id')]);
    });
    // Add checked layer
    $('input:radio[name="optionsRadios"]:checked').each(function () {
        map.addLayer(window[$(this).attr('id')]);
    });
});
 
$('input:checkbox[name="overlayLayers"]').change(function () {
    var layers = [];
 
    function sortByKey(array, key) {
        return array.sort(function (a, b) {
            var x = a[key];
            var y = b[key];
            return ((x < y) ? -1 : ((x > y) ? 1 : 0));
        });
    }
    if ($('#' + $(this).attr('id')).is(':checked')) {
        $('input:checkbox[name="overlayLayers"]').each(function () {
            // Remove all overlay layers
            map.removeLayer(window[$(this).attr('id')]);
            if ($('#' + $(this).attr('id')).is(':checked')) {
                // Add checked layers to array for sorting
                layers.push({
                    'z-index': $(this).attr('z-index'),
                    'layer': $(this)
                });
            }
        });
        // Sort layers array by z-index
        var orderedLayers = sortByKey(layers, 'z-index');
        // Loop through ordered layers array and add to map in correct order
        $.each(orderedLayers, function () {
            map.addLayer(window[$(this)[0].layer[0].id]);
        });
    } else {
        // Simply remove unchecked layers
        map.removeLayer(window[$(this).attr('id')]);
    }
});
	
		
	
	
	
		
//		
//		 $('#submit').click(function() {
//			 alert ('blah!')
//			 $('.selectpicker').selectpicker('hide');
//		 });
		
		
//	$('#submit').click(function(){
//		
//		//alert ('blah2!')
//		
//		var myID = $('input[name=optionsRadios]:checked', '#category2').val()
//		
//		
//		//alert (myID)
//		
////		if (map.hasLayer(myID)){
////			alert (myID)
////		}
//		
//	});


		
		
	
//	$('#lladd').click(function () {
//		//alert ("blah!")
//		bioregion.bringToFront();
//	});





	<!-- ================================================== -->
	<!-- Functions -->
	<!-- ================================================== -->	
	
	function bioregionStyle(feature) {
		return {weight: 1.2, opacity: 1, color: "#DF5A49", fillOpacity: 0.6, fillColor: "#E27A3F"};
	}
	
	function riverStyle(feature) {
		return {weight: 2, opacity: 1, color: "#2BACB5"};
	}
	
	
//	function createMap(div, coords) {
//    	var map = L.map(div, { scrollWheelZoom: false }).setView([52, -115], 3);
//    	map.addLayer(window.layerList.getLeafletLayer('OpenStreetMap'));
//    	return map;
//	}
	
	
	
	
	function onEachFeature(feature, layer) {
		var popupContent = "<p>Bioregion:&nbsp;" + feature.properties.Name + "</p>"
		
		if (feature.properties && feature.properties.popupContent) {
			popupContent += feature.properties.popupContent;
		}
		
		layer.bindPopup(popupContent);
		
		layer.on({
        	mouseover: highlightFeature,
        	mouseout: resetHighlight
			//click: zoomToFeature
    	});
	}
	
	
	
	
	function highlightFeature(e) {
    	var layer = e.target;

    	layer.setStyle({
        	weight: 2,
        	color: '#666',
        	dashArray: '',
        	fillOpacity: 0.7
    	});
		
		info.update(layer.feature.properties);

    if (!L.Browser.ie && !L.Browser.opera) {
		layer.bringToFront();
    	}
	}
	
	
	
	// Currently set to bioregions only
	function resetHighlight(e) {
    	bioregion.resetStyle(e.target);
		info.update();
	}
	
	
	
	function zoomToFeature(e) {
    	map.fitBounds(e.target.getBounds());
	}
	
	
	
	
//	function getJson(simp){  //Removed unneeded arguments here
//    	var url = 'js/' + simp + '.js';
//    	map.removeLayer(geojsonLayer);
//    	//geojsonLayer.clearLayers();  I don't believe this needed.
//    	$.getJSON(url, function(data){
//        	geojsonLayer = L.geoJson(data, {
//            	style: defaultStyle,
//            	onEachFeature: onEachFeature
//        });
//        geojsonLayer.addTo(map);
//    	});
//	}






	
	<!-- Add scalebar, info and legend -->
	scale = L.control.scale({position: 'bottomright'}).addTo(map);
	legend.addTo(map);
	//if(initSetting==1){	
	//info.addTo(map);
	
	//}




		

	</script>
    
    
    
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript" ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/docs.min.js"></script>
    
</body>
</html>

